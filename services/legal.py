def handle_legal_request(case_type: str, details: str = "") -> str:
    """
    تولید لایحه یا شکایت‌نامه بر اساس نوع پرونده.
    :param case_type: نوع پرونده (طلاق، حضانت، اجاره، کارگری، خسارات)
    :param details: جزئیات اضافه (اختیاری)
    :return: متن پیشنهادی لایحه
    """
    case_type = case_type.lower().strip()
    
    templates = {
        "طلاق": (
            "⚖️ **لایحه طلاق** (مطابق ماده ۱۱۱۹ و ۱۱۲۱ قانون مدنی ایران)\n\n"
            "**به نام خداوند جان و خرد**\n"
            "به محضر محترم دادگاه خانواده:\n\n"
            "خواهان: [نام و مشخصات شما]\n"
            "خوانده: [نام همسر]\n\n"
            "**درخواست**: طلاق به دلیل عسر و حرج (عدم سازگاری روانی و اخلاقی).\n"
            "**بنیان حقوقی**: ماده ۱۱۱۹ قانون مدنی — طرفین نتوانسته‌اند تفاوت‌های خود را حل و فصل کنند.\n\n"
            "**مدارک پیشنهادی**:\n"
            "۱. شناسنامه و کارت ملی\n"
            "۲. گواهی ازدواج\n"
            "۳. اظهارنامه‌های شهود (در صورت وجود)\n\n"
            "⚠️ تذکر: این لایحه یک نمونه کلی است. برای پروندهٔ واقعی، با یک وکیل مشورت کنید."
        ),
        "حضانت": (
            "⚖️ **لایحه حضانت** (مطابق ماده ۱۱۷۳–۱۱۷۶ قانون مدنی)\n\n"
            "**درخواست**: واگذاری حضانت فرزند [نام فرزند] به خواهان.\n"
            "**دلیل**: خوانده قادر به تأمین شرایط روحی و مالی لازم برای فرزند نیست.\n"
            "**حقوق فرزند**: حفظ ارتباط با هر دو والدین ضروری است.\n\n"
            "**مدارک پیشنهادی**:\n"
            "۱. شناسنامهٔ فرزند\n"
            "۲. گزارش روانشناسی (اختیاری ولی توصیه‌شده)\n"
            "۳. مدارک اثبات توانایی مالی خواهان\n\n"
            "✅ توجه: تا ۷ سالگی، حضانت مادر است — مگر آنکه مانع قانونی وجود داشته باشد."
        ),
        "اجاره": (
            "⚖️ **شکایت اجاره مسکن** (مطابق قانون اجاره مصوب ۱۴۰۲)\n\n"
            "**درخواست**:\n"
            "۱. وارسی قرارداد اجاره\n"
            "۲. جلوگیری از تخلیهٔ غیرقانونی\n"
            "۳. تعیین سند مالکیت توسط مالک\n\n"
            "**نکته قانونی**: مالک موظف است در صورت درخواست، سند مالکیت را ارائه دهد (ماده ۸ قانون اجاره ۱۴۰۲).\n\n"
            "**اقدام بعدی**: ارسال اخطاریهٔ کتبی به مالک — در صورت عدم پاسخ، مراجعه به دادگاه."
        ),
        "کارگری": (
            "⚖️ **شکایت کارگری** (مطابق قانون کار ایران)\n\n"
            "**درخواست**:\n"
            "۱. پرداخت حقوق معوق\n"
            "۲. پرداخت سنوات\n"
            "۳. جبران بیمهٔ نشده\n\n"
            "**مدارک مورد نیاز**:\n"
            "۱. کارت شغلی\n"
            "۲. قرارداد کار\n"
            "۳. فیش‌های حقوقی (در صورت وجود)\n\n"
            "✅ حق دارید ظرف ۱ سال از تاریخ ترخیص، شکایت کنید."
        ),
        "خسارات": (
            "⚖️ **لایحه خسارات شخصی** (مطابق ماده ۱۴۷ و ۱۴۸ قانون مدنی)\n\n"
            "**درخواست**: جبران خسارت ناشی از [شرح حادثه].\n"
            "**بنیان حقوقی**: هر کس با عمل خود به دیگری ضرری وارد آورد، عهده‌دار جبران آن است.\n\n"
            "**مدارک پیشنهادی**:\n"
            "۱. گزارش پزشکی یا تعمیرات\n"
            "۲. فیلم یا عکس از خسارت\n"
            "۳. شهادت شهود\n\n"
            "⚠️ مهلت مراجعه به دادگاه: ۲ سال از تاریخ وقوع حادثه."
        )
    }
    
    if case_type in templates:
        return templates[case_type]
    else:
        return (
            "⚖️ من می‌تونم کمک کنم در تهیه:\n"
            "• لایحه طلاق\n"
            "• درخواست حضانت\n"
            "• شکایت اجاره\n"
            "• شکایت کارگری\n"
            "• لایحه خسارات\n\n"
            "لطفاً نوع پرونده‌ات رو دقیق بگو. مثال:\n"
            "«طلاق» یا «شکایت کارگری»"
        )
